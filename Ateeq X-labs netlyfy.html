<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ATEEQ X-LABS | Premium Toolkit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020202;
            color: white;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .cyber-gradient-text {
            background: linear-gradient(90deg, #22d3ee, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(34, 211, 238, 0.4);
            transform: translateY(-4px);
        }

        .bg-noise {
            background-image: url('https://grainy-gradients.vercel.app/noise.svg');
            opacity: 0.15;
            mix-blend-mode: overlay;
        }

        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .animate-spin-custom { animation: spinner 1.2s linear infinite; }

        .view-hidden { display: none !important; }
        
        input, select, textarea {
            background: rgba(0, 0, 0, 0.5) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: white !important;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020202; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #22d3ee; }
    </style>
</head>
<body>
    <!-- Background Canvas -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="absolute top-[-15%] left-[-10%] w-[60%] h-[60%] bg-cyan-600/10 blur-[130px] rounded-full"></div>
        <div class="absolute bottom-[-15%] right-[-10%] w-[60%] h-[60%] bg-pink-600/10 blur-[130px] rounded-full"></div>
        <div class="absolute inset-0 bg-noise"></div>
    </div>

    <!-- Loading State -->
    <div id="loading-screen" class="fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="relative mb-4">
            <div class="w-20 h-20 border-4 border-cyan-500/10 border-t-cyan-500 rounded-full animate-spin-custom"></div>
            <div class="absolute inset-0 flex items-center justify-center text-[10px] font-black text-cyan-500 tracking-widest">ATEEQ</div>
        </div>
        <p class="text-gray-500 text-xs font-bold uppercase tracking-[0.3em] animate-pulse">Initializing Systems</p>
    </div>

    <div class="relative z-10 max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="flex flex-col items-center mb-12 text-center">
            <div class="mb-4 inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-[10px] font-black tracking-[0.2em] text-cyan-400 uppercase">
                <i class="fas fa-shield-halved text-[9px]"></i> Secure Foundry v2.1
            </div>
            <h1 class="text-5xl md:text-8xl font-black tracking-tighter mb-2 italic uppercase select-none">
                ATEEQ <span class="cyber-gradient-text">X-LABS</span>
            </h1>
            <p class="text-gray-500 text-lg md:text-xl font-medium tracking-tight">Premium Digital Infrastructure</p>
            
            <nav class="mt-10 flex bg-white/5 p-1.5 rounded-2xl border border-white/10 backdrop-blur-md">
                <button onclick="switchView('home')" id="btn-home" class="px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 bg-cyan-500 text-black shadow-lg shadow-cyan-500/30">
                    EXPLORE
                </button>
                <button onclick="switchView('admin')" id="btn-admin" class="px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 text-gray-400 hover:text-white">
                    CONTROL
                </button>
            </nav>
        </header>

<!-- Home View -->
        <main id="home-view" class="space-y-12">
            <!-- Search -->
            <div class="relative max-w-2xl mx-auto group">
                <div class="absolute -inset-1 bg-gradient-to-r from-cyan-500 to-pink-500 rounded-2xl blur opacity-10 group-focus-within:opacity-30 transition duration-500"></div>
                <div class="relative flex items-center bg-black/60 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-xl">
                    <i class="fas fa-search ml-5 text-gray-500"></i>
                    <input type="text" id="toolSearch" oninput="filterTools()" placeholder="Search available modules..." class="w-full bg-transparent py-5 px-4 outline-none text-lg placeholder:text-gray-700">
                </div>
            </div>

            <!-- Grid -->
            <div id="tools-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Skeleton Loader -->
                <div class="h-48 rounded-[2rem] bg-white/5 animate-pulse"></div>
                <div class="h-48 rounded-[2rem] bg-white/5 animate-pulse"></div>
                <div class="h-48 rounded-[2rem] bg-white/5 animate-pulse"></div>
                <div class="h-48 rounded-[2rem] bg-white/5 animate-pulse"></div>
            </div>

            <!-- Suggestion Form -->
            <section class="mt-20 glass-card rounded-[3rem] p-8 md:p-14">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-4xl font-black mb-6 uppercase leading-none">System<br><span class="text-pink-500">Request</span></h2>
                        <p class="text-gray-400 font-medium leading-relaxed">Need a custom tool or found a bug? Submit a ticket and the engineering team will prioritize your request.</p>
                        <div class="mt-8 flex gap-4 grayscale opacity-30">
                            <i class="fas fa-code text-2xl"></i>
                            <i class="fas fa-database text-2xl"></i>
                            <i class="fas fa-server text-2xl"></i>
                        </div>
                    </div>
                    <form id="suggestion-form" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" name="name" placeholder="Agent Name" class="rounded-xl p-4 outline-none" required>
                            <select name="type" class="rounded-xl p-4 outline-none" required>
                                <option value="suggestion">Suggestion</option>
                                <option value="broken">Report Bug</option>
                            </select>
                        </div>
                        <textarea name="description" placeholder="Technical specifications..." class="w-full rounded-xl p-4 outline-none min-h-[120px]" required></textarea>
                        <button type="submit" class="w-full bg-white text-black font-black py-4 rounded-xl hover:bg-cyan-400 transition-all uppercase tracking-widest text-sm flex items-center justify-center gap-2">
                            <i class="fas fa-paper-plane"></i> Transmit Data
                        </button>
                    </form>
                </div>
            </section>
        </main>

        <!-- Admin View -->
        <main id="admin-view" class="view-hidden">
            <div id="admin-login" class="max-w-md mx-auto py-10">
                <div class="glass-card rounded-[3rem] p-10 text-center">
                    <div class="w-20 h-20 bg-pink-500/10 rounded-full flex items-center justify-center mx-auto mb-8">
                        <i class="fas fa-fingerprint text-3xl text-pink-500"></i>
                    </div>
                    <h2 class="text-2xl font-black mb-8 uppercase tracking-tighter">Admin Credentials</h2>
                    <div class="space-y-4 text-left">
                        <div class="space-y-1">
                            <label class="text-[10px] font-black text-gray-600 uppercase ml-2 tracking-widest">Identity</label>
                            <input type="text" id="auth-user" placeholder="Ateeq Shaikh" class="w-full rounded-xl py-3 px-4 outline-none">
                        </div>
                        <div class="space-y-1">
                            <label class="text-[10px] font-black text-gray-600 uppercase ml-2 tracking-widest">Access Key</label>
                            <input type="password" id="auth-pass" placeholder="••••••••" class="w-full rounded-xl py-3 px-4 outline-none">
                        </div>
                        <button onclick="handleAdminLogin()" class="w-full bg-pink-500 text-black font-black py-4 rounded-xl hover:bg-pink-400 transition-all uppercase tracking-widest mt-4">
                            Verify Identity
                        </button>
                    </div>
                </div>
            </div>

<div id="admin-dashboard" class="view-hidden max-w-4xl mx-auto space-y-8">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-black italic uppercase">System Console</h2>
                    <button onclick="logout()" class="text-xs font-black text-pink-500 uppercase hover:underline">Terminate Session</button>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass-card rounded-[2rem] p-8">
                        <h3 class="text-sm font-black mb-6 uppercase text-cyan-400">Deploy New Module</h3>
                        <form id="add-tool-form" class="space-y-4">
                            <input type="text" name="name" placeholder="Module Name" class="w-full rounded-xl p-3 outline-none" required>
                            <input type="text" name="category" placeholder="Tags (e.g. AI, Utility)" class="w-full rounded-xl p-3 outline-none">
                            <input type="url" name="url" placeholder="Deployment URL" class="w-full rounded-xl p-3 outline-none" required>
                            <input type="text" name="icon" placeholder="Icon URL (Optional)" class="w-full rounded-xl p-3 outline-none">
                            <button type="submit" class="w-full bg-cyan-500 text-black font-black py-4 rounded-xl hover:bg-cyan-400 transition-all uppercase text-sm">
                                Initialize Deployment
                            </button>
                        </form>
                    </div>

                    <div class="glass-card rounded-[2rem] p-8 flex flex-col">
                        <h3 class="text-sm font-black mb-6 uppercase text-pink-400">Live Modules</h3>
                        <div id="admin-tool-list" class="space-y-3 overflow-y-auto max-h-[400px] pr-2">
                            <!-- Admin management tools list -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-24 text-center pb-12 border-t border-white/5 pt-16">
            <a href="https://whatsapp.com/channel/0029VbBgUGV1SWstD88JBW2u" target="_blank" class="group relative inline-block">
                <div class="absolute -inset-4 bg-green-500 blur-2xl opacity-10 group-hover:opacity-30 transition duration-500"></div>
                <div class="relative bg-[#1ed760] text-black font-black px-12 py-5 rounded-[2rem] flex items-center gap-4 shadow-2xl transition-all hover:scale-105 active:scale-95">
                    <i class="fab fa-whatsapp text-2xl"></i> WHATSAPP BROADCAST
                </div>
            </a>
            <div class="mt-12 opacity-40">
                <p class="text-[10px] font-black tracking-[0.5em] uppercase">Built for Performance</p>
                <p class="text-gray-500 text-xs mt-2 font-bold">© 2026 ATEEQ SHAIKH PRODUCTION</p>
            </div>
        </footer>
    </div>

    <!-- Modal -->
    <div id="wa-modal" class="view-hidden fixed inset-0 z-[2000] flex items-center justify-center p-6 bg-black/95 backdrop-blur-md">
        <div class="glass-card rounded-[4rem] p-12 max-w-sm w-full relative text-center border-cyan-500/20 shadow-[0_0_80px_rgba(34,211,238,0.15)]">
            <button onclick="closeModal(false)" class="absolute top-10 right-10 text-gray-500 hover:text-white transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
            <div class="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-8 border border-green-500/20">
                <i class="fab fa-whatsapp text-4xl text-green-500"></i>
            </div>
            <h2 class="text-3xl font-black mb-4 tracking-tighter uppercase leading-none">Access<br><span class="text-green-500">The Foundry</span></h2>
            <p class="text-gray-500 mb-10 text-sm font-medium leading-relaxed">Join the network for instant alerts on new tools and technical maintenance.</p>
            <div class="space-y-4">
                <a href="https://whatsapp.com/channel/0029VbBgUGV1SWstD88JBW2u" target="_blank" onclick="closeModal(true)" class="block w-full bg-white text-black font-black py-5 rounded-[2rem] text-center shadow-xl hover:bg-green-500 transition-all duration-300 uppercase tracking-widest">Initialize</a>
                <button onclick="closeModal(true)" class="text-[10px] font-black text-gray-600 uppercase tracking-widest hover:text-white transition-colors">Dismiss permanently</button>
            </div>
        </div>
    </div>

    <!-- Firebase System -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, onSnapshot, addDoc, updateDoc, deleteDoc, increment, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

// Config & Init
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'ateeq-production-v2';
        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        let allTools = [];
        let authenticated = false;

        // Auth Loop
        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (e) { console.error("Auth Failure", e); }
        };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                authenticated = true;
                startDataStream();
                setTimeout(() => {
                    document.getElementById('loading-screen').classList.add('opacity-0');
                    setTimeout(() => document.getElementById('loading-screen').remove(), 500);
                }, 1000);
                checkModalStatus();
            }
        });

        initAuth();

        // Data Stream
        function startDataStream() {
            const toolsRef = collection(db, 'artifacts', appId, 'public', 'data', 'tools');
            onSnapshot(toolsRef, (snapshot) => {
                allTools = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderTools(allTools);
                renderAdminList();
            }, (err) => console.error("Sync Error", err));
        }

        // Render Functions
        function renderTools(data) {
            const grid = document.getElementById('tools-grid');
            if (!data.length) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center opacity-30 font-black uppercase tracking-widest">No active modules found</div>`;
                return;
            }
            grid.innerHTML = '';
            data.forEach(item => {
                const card = document.createElement('a');
                card.href = item.url;
                card.target = "_blank";
                card.className = "group relative flex flex-col items-center glass-card rounded-[2.5rem] p-8";
                card.onclick = (e) => trackHit(item.id);
                
                const icon = item.icon ? 
                    `<img src="${item.icon}" class="w-16 h-16 object-contain" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1043/1043512.png'">` : 
                    `<i class="fas fa-microchip text-4xl text-cyan-400"></i>`;

                card.innerHTML = `
                    <div class="relative w-24 h-24 mb-6 flex items-center justify-center bg-black/40 border border-white/5 rounded-3xl transition-transform group-hover:rotate-6">
                        ${icon}
                    </div>
                    <h3 class="text-center font-black text-lg mb-1 tracking-tight group-hover:text-cyan-400 transition-colors uppercase truncate w-full">${item.name}</h3>
                    <div class="text-[9px] font-black uppercase tracking-[0.2em] text-gray-600 bg-white/5 px-3 py-1 rounded-full">${item.category || 'Module'}</div>
                    <div class="mt-6 flex items-center gap-2 text-[10px] font-bold text-gray-500 uppercase">
                        <i class="fas fa-bolt text-cyan-500"></i> ${item.views || 0} Instances
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function renderAdminList() {
            const list = document.getElementById('admin-tool-list');
            list.innerHTML = '';
            allTools.forEach(item => {
                const row = document.createElement('div');
                row.className = "flex items-center justify-between bg-white/5 p-4 rounded-2xl border border-white/5";
                row.innerHTML = `
                    <div class="truncate max-w-[200px]">
                        <p class="font-black text-sm uppercase truncate">${item.name}</p>
                        <p class="text-[9px] text-gray-500 font-bold uppercase">${item.views || 0} hits • ${item.category || 'General'}</p>
                    </div>
                    <button onclick="deleteModule('${item.id}')" class="w-10 h-10 flex items-center justify-center rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all">
                        <i class="fas fa-trash-alt text-xs"></i>
                    </button>
                `;
                list.appendChild(row);
            });
        }

        // Action Handlers
        async function trackHit(id) {
            const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'tools', id);
            await updateDoc(docRef, { views: increment(1) });
        }
        
        window.switchView = (target) => {
            const home = document.getElementById('home-view');
            const admin = document.getElementById('admin-view');
            const btnHome = document.getElementById('btn-home');
            const btnAdmin = document.getElementById('btn-admin');

            if (target === 'home') {
                home.classList.remove('view-hidden');
                admin.classList.add('view-hidden');
                btnHome.className = "px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 bg-cyan-500 text-black shadow-lg shadow-cyan-500/30";
                btnAdmin.className = "px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 text-gray-400 hover:text-white";
            } else {
                home.classList.add('view-hidden');
                admin.classList.remove('view-hidden');
                btnAdmin.className = "px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 bg-pink-500 text-black shadow-lg shadow-pink-500/30";
                btnHome.className = "px-10 py-3 rounded-xl text-sm font-black transition-all duration-300 text-gray-400 hover:text-white";
            }
        };

        window.filterTools = () => {
            const q = document.getElementById('toolSearch').value.toLowerCase().trim();
            const results = allTools.filter(t => t.name.toLowerCase().includes(q) || (t.category && t.category.toLowerCase().includes(q)));
            renderTools(results);
        };

        window.handleAdminLogin = () => {
            const user = document.getElementById('auth-user').value.trim();
            const pass = document.getElementById('auth-pass').value.trim();

            if (user === "Ateeq Shaikh" && pass === "SHAIKHAHMED098") {
                document.getElementById('admin-login').classList.add('view-hidden');
                document.getElementById('admin-dashboard').classList.remove('view-hidden');
            } else {
                alert("ACCESS DENIED: Credentials mismatch.");
            }
        };

        window.logout = () => {
            document.getElementById('admin-login').classList.remove('view-hidden');
            document.getElementById('admin-dashboard').classList.add('view-hidden');
            document.getElementById('auth-user').value = '';
            document.getElementById('auth-pass').value = '';
        };

        window.deleteModule = async (id) => {
            if (confirm("Permanently destroy this module?")) {
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'tools', id));
            }
        };

        window.closeModal = (forever) => {
            if (forever) localStorage.setItem('ateeq_wa_dismissed', 'true');
            document.getElementById('wa-modal').classList.add('view-hidden');
        };

        function checkModalStatus() {
            if (!localStorage.getItem('ateeq_wa_dismissed')) {
                setTimeout(() => document.getElementById('wa-modal').classList.remove('view-hidden'), 3500);
            }
        }

// Forms
        document.getElementById('add-tool-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const f = new FormData(e.target);
            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'tools'), {
                    name: f.get('name'),
                    category: f.get('category'),
                    url: f.get('url'),
                    icon: f.get('icon'),
                    views: 0,
                    createdAt: serverTimestamp()
                });
                e.target.reset();
            } catch (err) { alert("Deployment error: System offline."); }
        });

        document.getElementById('suggestion-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const f = new FormData(e.target);
            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'reports'), {
                    name: f.get('name'),
                    type: f.get('type'),
                    description: f.get('description'),
                    createdAt: serverTimestamp()
                });
                alert("Transmission Successful. Ateeq Shaikh has been notified.");
                e.target.reset();
            } catch (err) { alert("Transmission failed."); }
        });
    </script>
</body>
</html>

